// ==UserScript==
// @name         keydown sound effect
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  keyboard sound effect that brings you back to the medieval times
// @author       madderscientist
// @include      *
// @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==
// @grant        none
// @run-at       document-end
// ==/UserScript==

(function() {
    'use strict';
    const a = 'data:audio/mpeg;base64,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NIAAAAQo+hcCYXAKD55KYrXWl3NPJRLNGjMdVSZV2YUDE//9UlEkzNqrMDASZm2DARqqrqSkex/GbqlOr+zKcar1Yv7GxhTRVxZ8RRL/2FXWUyXnlUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=';
    // document.addEventListener("keydown", () => {
    //     const au = new Audio(a);
    //     au.play();
    // });
    // 上述方案性能不够好。改为缓存音频数据
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    let audioBuffer = null;

    // 解码并缓存
    fetch(a)
        .then(res => res.arrayBuffer())
        .then(buf => ctx.decodeAudioData(buf))
        .then(buffer => { audioBuffer = buffer; });

    document.addEventListener("keydown", () => {
        if (!audioBuffer) return; // 未解码完成
        const source = ctx.createBufferSource();
        source.buffer = audioBuffer;
        source.connect(ctx.destination);
        source.start(0);
        source.addEventListener('ended', function() {
            this.disconnect();
        });
    });
})();